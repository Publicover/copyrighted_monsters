<% monster_map = "https://www.google.com/maps/embed/v1/place?q=place_id:ChIJ_Zt-ingcU4gRbcoK70AJKv4&key=#{ENV["GOOGLE_MONSTER_MAPS_KEY"]}" %>
<% monser_geocode = "https://maps.googleapis.com/maps/api/geocode/json?address=403+S.+Elam+Greensboro+North+Carolina" %>

<center>
<br>
<h1> ALL THE MONSTERS </h1>
<br>
<br><div>
<iframe width="600" height="450" frameborder="0" style="border:0"
  src= <%= monster_map %>
  allowfullscreen> </iframe>
</div>
<br>
<table>
  <tr>
    <th>Name</th>
    <th>Rarity</th>
    <th>Location</th>
    <th>City</th>
    <th>State</th>
  </tr>

  <% @monsters.each do |monster| %>
    <tr>
      <td><%= monster.name %></td>
      <td><%= monster.rarity %></td>
      <td><%= monster.location.try(:address) %> </td>
      <td><%= monster.location.try(:city) %> </td>
      <td><%= monster.location.try(:state) %> </td>
      <td><%= link_to "DELETE RECORD", [monster.location, monster],
                                    method: :delete,
                                    data: { confirm: "Hope you know what you're doing" } %>
    </tr>
  <% end %>
</table>

<br>
<%= link_to "GOT A NEW LOCATION?", new_location_path %> |
<%= link_to "SEE ALL THE LOCATIONS", controller: "locations" %>

<% monster_array = [] %>

<% @monsters.each do |monster| %>
  <% monster_array << monster.location.try(:address) + "+" + monster.location.try(:city) + "+" + monster.location.try(:state) %>
<% end%>
<br>
monster_array: <%= monster_array %>
<br>
monster_array.uniq: <%= monster_array.uniq! %>
<br>
<% monster_array.each do |monster| %>
  <% monster.gsub!(/\s/,'+') %>
<% end %>
<br>
monster_array.gsub: <%= monster_array %>
<br>



https://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&key=#{ENV["GOOGLE_MONSTER_MAPS_KEY"]}

<!DOCTYPE html>
<html>
  <head>
    <title>Simple Map</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <style>
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #map {
        height: 100%;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script>
      var map;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: -34.397, lng: 150.644},
          zoom: 8
        });
      }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=#{ENV["GOOGLE_MONSTER_MAPS_KEY"]}&callback=initMap"
    async defer></script>
  </body>
</html>
